<html>
    <head>
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/static/css/style.css" />
        <style>
        .hidden{
            display:none;
        }

        div#updateBox {
            display:inline-block;
            width: 200px;
        }
        </style>
    </head>
    <body>
        <h2>{{ movie.movie_name }}</h2>
        {% if rating %}
            Your rating: {{ rating.rating }}
        {% else %}
            You have not rated this movie yet.
        {% endif %}

        <div id="updateButton"> <button type="button" class="btn btn-default">Update Rating</button></div>

        <div class = 'hidden' id="updateBox">
            <form role="form" id="rating-form"> 
                <input type="text" name="rating" class="form-control" id="rating" placeholder="Enter Rating">
                <button id="movieUpdateButton" type="submit" class="btn btn-default">Submit Rating</button>
            </form>
        </div>
    </body>

<script src="/static/js/jquery-1.11.0.min.js"></script>
<!-- jQuery v1.11.0 -->
<script src="/static/js/bootstrap-3.2.0.min.js"></script>

    <script>
        $("#updateButton").click(updateRatingForm);
        // $("#movieUpdateButton").click(postRequestToUpdate);
        $("#rating-form").submit(handleFormSubmit);

        function updateRatingForm(evt) {
            $("#updateBox").toggleClass('hidden');
        } 

        function handleFormSubmit(evt) {
            var textInput = $("#rating");
            var newRating = textInput.val();

            postRequestToUpdate(newRating);
        }

        function postRequestToUpdate(newRating) {
        //we'll probably need a post request here
            alert(newRating);
            
            // NEXT STEP: finish this post request
            // $.post(
            //     "/update/{{ movie.id }}", 
            //     newRating, 
            //     function (data) {}
            //     )


       };

    </script>


</html>